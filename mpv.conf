# MPV CONFIG STABIL (Intel/Mesa)
#
# === VIDEO OUTPUT ===
vo=gpu # Gunakan GPU
gpu-api=opengl # OpenGL lebih stabil berbanding Vulkan pada Mesa
gpu-context=auto # Pilih konteks automatik (X11/Wayland)
interpolation=yes # Lancarkan frame interpolation
tscale=oversample # Kualiti interpolation
video-sync=display-resample # Sinkronkan video ke refresh rate skrin

# === HDR / TONE MAPPING ===
tone-mapping=bt.2390
target-peak=300
hdr-compute-peak=yes
gamut-mapping-mode=clip

# === WINDOW / UI ===
autofit=70% # Saiz tetingkap ikut % skrin
geometry=900x720
#geometry=1080x540 # Fallback untuk 1920x1080
keepaspect=yes # Kekalkan ratio video
fullscreen=no
border=no

# === CURSOR & SCREENSAVER ===
cursor-autohide=1000 # no, always, 0-30000 (integer range)
stop-screensaver=yes

# === OSD / OSC ===
osc=no # On Screen Controller
osd-bar=yes # Tunjuk bar OSD
osd-level=3 # Info OSD (volume, title, time)
osd-font-size=36
osd-border-size=2

# ui-scale dibuang untuk kompatibiliti versi lama

# === AUDIO ===
ao=pipewire
audio-channels=stereo
volume=100
volume-max=110
audio-display=embedded-first

# === BAHASA ===
alang=en,ms
slang=en,ms

# === STREAMING & YOUTUBE ===
ytdl=yes
script-opts=ytdl_hook-ytdl_path=/usr/bin/yt-dlp

# --- Youtube khusus ---
[ytdl://youtube.com/*]
ytdl-format="bestvideo[height=480][vcodec^=vp9]+bestaudio/bestvideo[height=480][vcodec^=h264]+bestaudio/best"
demuxer-readahead-secs=20
script-opts=ytdl_hook-ytdl_path=/usr/bin/yt-dlp

# --- Fallback untuk semua URL selain Youtube ---
[ytdl]
ytdl-format="bestvideo[height=480][vcodec^=vp9]+bestaudio/bestvideo[height=480][vcodec^=h264]+bestaudio/best"
demuxer-readahead-secs=20
script-opts=ytdl_hook-ytdl_path=/usr/bin/yt-dlp

# === CACHE / NETWORK ===
demuxer-max-bytes=512MiB
demuxer-readahead-secs=15
network-timeout=10

# === PROTOCOL: FILE ===
[protocol.file]
force-seekable=yes
force-window=immediate
# Buang pseudo-gui supaya terminal exit selepas media tamat
# player-operation-mode=pseudo-gui  

# === LOOP / IMAGE MEDIA ===
[loop-media]
loop-file=yes
no-pause

[extension.gif]
profile=loop-media

[extension.jpeg]
profile=loop-media

[extension.webm]
profile=loop-media

[extension.mp4]
loop-file=no # MP4 main sekali sahaja

# EOF
